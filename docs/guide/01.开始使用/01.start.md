---
title: å¿«é€Ÿå¼€å§‹
date: 2022-09-28 00:27:13
permalink: /guide/start
article: false
---

## ğŸ•¹ å¿«é€Ÿå¼€å§‹

é€šè¿‡è¯¥é¡µé¢ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ¨èçš„éƒ¨ç½²æ–¹å¼å¿«é€Ÿå¼€å§‹ä½¿ç”¨ SeaMoonã€‚

::: tip å†™åœ¨å‰é¢
æœ¬é¡µé¢æŒ‰ç…§é˜¿é‡Œäº‘æ ‡å‡†äº‘å‡½æ•°æœåŠ¡è¿›è¡Œéƒ¨ç½²ï¼Œå¦‚æœæ‚¨å¸Œæœ›è·å–åˆ°æ›´å¤šè‡ªå®šä¹‰çš„é…ç½®å’Œä½¿ç”¨æ–¹å¼ï¼Œ[è¯·è·³è½¬](https://seamoon.dvkunion.cn/guide/deploy)

ğŸ”¥ å¦‚æœæ‚¨çš„é’±åŒ…å’Œé¢„ç®—æœ‰é™ï¼Œå¹¶ä¸”ä»£ç†IPéœ€æ±‚å¹¶ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ [sealoséƒ¨ç½²æœåŠ¡ç«¯](https://seamoon.dvkunion.cn/guide/deploy/sealos)

ğŸ”§ å¦‚æœä½ ä¸æƒ³ä»…æ‹¥æœ‰ http/socks5 åè®®çš„ä»£ç†ï¼ŒæœŸæœ›ä½¿ç”¨æ›´å¤šä»£ç†ï¼Œè¯·ç§»æ­¥ [æ›´å¤šå®¢æˆ·ç«¯é€‚é…](https://seamoon.dvkunion.cn/guide/client/) 
:::

### äº‹å‰å‡†å¤‡

+ äº‘å‚å•†è´¦æˆ·(ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹)ï¼Œå¹¶å¼€é€šå¯¹åº”çš„serverlessæœåŠ¡ï¼ˆé˜¿é‡Œäº‘serverlessæœåŠ¡åä¸ºï¼šå‡½æ•°è®¡ç®—ï¼‰
+ äº‘å‚å•†è´¦æˆ· AK/SKï¼Œå¹¶æ‹¥æœ‰æ“ä½œFCçš„å…¨éƒ¨æƒé™ã€‚
+ ä¸€å°å­˜åœ¨dockerã€Nodejs >= 12 çš„å®¢æˆ·ç«¯çš„æœºå™¨ï¼ŒåŒæ—¶ä¿è¯ 7777ã€1080ã€9999ç«¯å£æœªè¢«å ç”¨ï¼Œè¯¥æœºå™¨å°†ä½œä¸ºä½¿ç”¨çš„å®¢æˆ·ç«¯ã€‚

### Step.1 å®‰è£…serverless-devså·¥å…·

```shell
$ npm install @serverless-devs/s -g
```

å›½å†…åŠ é€Ÿ:

```shell
$ cnpm install @serverless-devs/s -g
```

å¦‚æœä¸å­˜åœ¨npmåŒ…ç®¡ç†å™¨ï¼Œè¯·å…ˆé€šè¿‡nodeå®‰è£…npm/cnpm

å®‰è£…åè¿è¡Œ

```shell
$ s -v
```

å°†å¯ä»¥çœ‹åˆ°serverless-devsç‰ˆæœ¬ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚

```shell
@serverless-devs/s3: 0.1.0, s-home: /Users/DVK/.s, darwin-arm64, node-v20.9.0
```

ç„¶åé€šè¿‡å¦‚ä¸‹å‘½ä»¤å¼€å§‹é…ç½®äº‘å‚å•†è®¤è¯

```shell
$ s config add 
```

æŒ‰æç¤ºå³å¯é€‰æ‹©å³å¯ï¼Œæœ¬æ¬¡æˆ‘ä»¬ä»¥ `Alibaba Cloud` ä¸ºä¾‹ï¼Œè¾“å…¥å¯¹åº”çš„è´¦æˆ·`AccessKeyID`ã€`AccessKeySecret`

æœ€åä¸€æ­¥å¡«å†™`alias`æ—¶ï¼Œè¯·ç¡®ä¿å€¼ä¸º`default`(ä¸€èˆ¬åˆæ¬¡å®‰è£…ä¸è®¤è¯è¯¥å­—æ®µéƒ½é»˜è®¤ä¸ºdefaultï¼Œå›è½¦å³å¯)ã€‚

å¦‚æœAK/SKæ— è¯¯ï¼Œé‚£ä¹ˆä½ å°†ä¼šçœ‹åˆ°è®¤è¯æˆåŠŸçš„æç¤ºã€‚

### Step.2 éƒ¨ç½²æœåŠ¡ç«¯

```shell
$ git clone https://github.com/DVKunion/SeaMoon.git
```

è¿›å…¥åˆ°é¡¹ç›®ç›®å½•

```shell
$ cd SeaMoon
$ s deploy
```

å¦‚æœä½ ä¸æ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼Œé‚£ä¹ˆå°†ä¼šæç¤ºä½ é€‰æ‹©å†²çªçš„é…ç½®ï¼šremote/localï¼Œä¸€èˆ¬é€‰æ‹©localå³å¯ã€‚

ç¨ç­‰ç‰‡åˆ»ï¼Œä½ å°†ä¼šå¾—åˆ°éƒ¨ç½²å¥½çš„ä¸¤ä¸ªåœ°å€ï¼š

```yaml
SeaMoon-WST-Node:
  region: cn-hongkong
  service:
    name: SeaMoon-Service
  function:
    name: ws-node
    runtime: custom
    handler: main
    memorySize: 128
    timeout: 300
    cpu: 0.05
    diskSize: 512
  url:
    system_url: https://ws-node-seamoon-service-xxxxxxxx.cn-hongkong.fcapp.run
    system_intranet_url: https://ws-node-seamoon-service-xxxxxxxx.cn-hongkong-vpc.fcapp.run
  triggers:
    - type: http
      name: httpTrigger
SeaMoon-GRT-Node:
  region: cn-hongkong
  service:
    name: SeaMoon-Service
  function:
    name: grpc-node
    runtime: custom
    handler: main
    memorySize: 128
    timeout: 300
    cpu: 0.05
    diskSize: 512
  url:
    system_url: https://grpc-node-seamoon-service-xxxxxxxx.cn-hongkong.fcapp.run
    system_intranet_url: https://grpc-node-seamoon-service-xxxxxxxx.cn-hongkong-vpc.fcapp.run
  triggers:
    - type: http
      name: httpTrigger
```

è¿™é‡Œæ˜¯ç”¨çš„éƒ½æ˜¯é»˜è®¤é…ç½®ï¼Œå¦‚æœä½ éœ€è¦æ›´å¤šé«˜çº§å¯é€‰é¡¹ï¼Œ[è¯·ç»§ç»­é˜…è¯»](https://seamoon.dvkunion.cn/guide/deploy)

åŒæ ·ï¼Œå¦‚æœä½ ä¸æƒ³ä½¿ç”¨é˜¿é‡Œäº‘ï¼Œæˆ–è€…æƒ³å¯»æ±‚æ›´å»‰ä»·çš„è®¡è´¹æ–¹å¼ï¼Œ[è¯·ç»§ç»­é˜…è¯»](https://seamoon.dvkunion.cn/guide/deploy)

æœåŠ¡ç«¯éƒ¨ç½²å®Œæˆ

### Step.3 å¼€å¯å®¢æˆ·ç«¯ä½¿ç”¨

```shell
$ docker run -it -d --net=host dvkunion/seamoon:latest proxy

```

é»˜è®¤ä½¿ç”¨`--net=host`æ¨¡å¼ï¼Œç„¶åæµè§ˆå™¨æ‰“å¼€ï¼š

`localhost:7777`

å³å¯å¼€å¯å®¢æˆ·ç«¯, ç‚¹å‡»é…ç½®ç®¡ç†

![client](https://seamoon.oss-cn-hangzhou.aliyuncs.com/0dd37f5600364e59a9457e38eaf77b1f.png)

æ·»åŠ äº‘ç«¯é…ç½®

![client-config](https://seamoon.oss-cn-hangzhou.aliyuncs.com/66b1b150238e400483adf936649b7ed5.png)

::: tip å¦‚ä½•å¡«å†™åœ°å€  
æˆ‘ä»¬åœ¨æ­¥éª¤2çš„æ—¶å€™ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨ s å·¥å…·å®ç°çš„éƒ¨ç½²ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ yaml å†…å¯ä»¥çœ‹åˆ° url å­—æ®µï¼Œurl å­—æ®µå†…çš„ system_url å³ä¸ºæˆ‘ä»¬éœ€è¦çš„åœ°å€ã€‚
ä¸è¦ä½¿ç”¨å¸¦æœ‰ vpc å­—æ ·çš„ urlï¼Œ ä¹Ÿå°±æ˜¯ system_intranet_url å­—æ®µçš„å€¼ï¼Œè¿™æ˜¯å†…ç½‘ vpc è®¿é—®çš„åŸŸåã€‚  
é™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦è‡ªè¡Œå°†åè®®å¤´ https:// æ›¿æ¢ä¸ºå¯¹åº”çš„éš§é“åè®®ï¼Œå¦‚: ws:// æˆ–æ˜¯ grcp:// ã€‚é»˜è®¤ä¸¤ç§åè®®çš„éš§é“æ˜¯éƒ½éƒ¨ç½²äº†çš„ã€‚   
grpc æŒ‰ç…§é˜¿é‡Œäº‘çš„è¦æ±‚ï¼Œè¿˜éœ€è¦è‡ªè¡Œå£°æ˜ç«¯å£ï¼Œç”±æ­¤ï¼Œä¸€ä¸ª grpc éš§é“çš„å¡«å†™åº”è¯¥æ˜¯è¿™æ ·: grpc://grpc-node-seamoon-service-xxxxxxxx.cn-hongkong.fcapp.run:8089
8089 æ˜¯é˜¿é‡Œäº‘çš„å›ºå®š grpc åè®®ç«¯å£ï¼Œä¸éœ€è¦æ”¹åŠ¨ã€‚  
:::

å¼€å¯socks5ä»£ç†ï¼Œå¹¶ä¿æŒé»˜è®¤`:1080`ä¸æ”¹å˜ã€‚

æ­¤æ—¶ï¼Œä½ å·²ç»å¯ä»¥é€šè¿‡äº‘å‡½æ•°å¯åŠ¨socks5ä»£ç†è®¿é—®äº†ã€‚

![speed](https://seamoon.oss-cn-hangzhou.aliyuncs.com/7bfff588795a4e41b488694ad4eb5153.png)